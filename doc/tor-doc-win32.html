<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <title>Tor SwitchProxy Install Instructions</title>
  <meta name="Author" content="Roger Dingledine" />
  <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" />
  <link rel="stylesheet" type="text/css" href="http://tor.eff.org/stylesheet.css" />
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
</head>

<body>

<!-- TITLE BAR & NAVIGATION -->

<table class="banner" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td class="banner-left"></td>
        <td class="banner-middle">
            <a href="/index.html">Home</a>
          | <a href="/howitworks.html">How It Works</a>
          | <a href="/download.html">Download</a>
          | <a href="/documentation.html">Docs</a>
          | <a href="/users.html">Users</a>
          | <a href="/faq.html">FAQs</a>
          | <a href="/volunteer.html">Volunteer</a>
          | <a href="/developers.html">Developers</a>
          | <a href="/research.html">Research</a>
          | <a href="/people.html">People</a>
        </td>
        <td class="banner-right"></td>
    </tr>
</table>
 
<!-- END TITLE BAR & NAVIGATION -->

<div class="center">

<div class="main-column">

<h1>Running the <a href="http://tor.eff.org/">Tor</a> client on MS Windows</h1>

<hr />
<a name="installing"></a>
<h3>Step One: Download and Install Tor</h3>

<p>
<b>Note that these are the installation instructions for running a
client on MS Windows (98, 98SE, NT4, 2000, XP, Server)
If you want to run a server (please do), read the "Configuring a server" section at
<a href="tor-doc.html#server">tor-doc.html</a>.</b>
</p>
<p>
The latest beta release of Tor for MS Windows is
<a href="http://tor.eff.org/dist/win32/tor-0.1.1.2-alpha-win32.exe">0.1.1.2-alpha</a>.
Download it by clicking the link. You may be able to find experimental versions

<a href="http://tor.eff.org/dist/win32/">here</a>, if you're looking for
new features and new bugs.
</p>

<p>
If you want to run Tor in the system
tray and/or as a service have a look at this <a
href="http://wiki.noreply.org/noreply/TheOnionRouter/TorFAQ#Win32SystemTrayService">FAQ
entry</a>. If you dont mind running in a window (so you can see its logs
and errors) our Tor installer should make everything pretty simple. Below
is a screenshot of the setup page (your version will probably be newer
than the version printed in this screenshot):
</p>

<img alt="tor installer splash page"
src="http://tor.eff.org/img/screenshot-win32-installer-splash.png" />

<p>
By default, Tor is not configured to run at startup.
<!--We highly recommend that you enable that feature, however. -->
You can enable this by checking the "Run at startup" box as shown below.
Be sure to leave the other boxes checked.
</p>

<img alt="select components to install"
src="http://tor.eff.org/img/screenshot-win32-installer-components.png" />

<p>Once the installer is finished, it will run Tor in a window so
you can see its logs and errors. (When you wish to browse anonymously,
you may minimize this window, but do not close it.)
</p>

<img alt="tor window screenshot"
src="http://tor.eff.org/img/screenshot-win32-dos-window.png" />

<p>Tor comes configured as a client by default. It uses a built-in
default configuration file, and most people won't need to change any of
the settings. Tor is now installed. <!--Close the Tor client for now by
closing the cmd window.-->
</p>

<hr />
<a name="privoxy"></a>
<h3>Step Two: Install Privoxy for Web Browsing</h3>

<p>After installing Tor, you need to configure your applications to use it.
</p>

<p>
The first step is to set up web browsing. Start by installing <a
href="http://www.privoxy.org/">Privoxy</a> (click on 'recent releases',
then scroll down to the MS Windows installer packages). Privoxy is a filtering
web proxy that integrates well with Tor. Once it's installed, it should
appear in your system tray as a "P" in a circle, as pictured below:
<!-- Exit from
Privoxy for now by right clicking on the "P" icon and finding the exit option.-->
</p>

<img alt="privoxy icon in the system tray"
src="http://tor.eff.org/img/screenshot-win32-privoxy-icon.jpg" />

<p>You need to configure Privoxy to use Tor.
Open Privoxy's main config file by selecting it from Start Menu|All
Programs:
</p>

<img border="1" alt="editing privoxy config"
src="http://tor.eff.org/img/screenshot-win32-privoxy-config.png" />

<p>Add the line <br>
<tt>forward-socks4a / localhost:9050 .</tt><br>
to Privoxy's config file. Don't forget to add the dot at the end.
The easiest way is to select the above line and copy/paste it into
the file. Be sure to save.
</p>

<img border="1" alt="privoxy points to tor"
src="http://tor.eff.org/img/screenshot-win32-privoxy-edit.png" />

<p>Privoxy keeps a log file of everything passed through it.  In
order to stop this you will need to comment out two lines by inserting a
# before the line. The two lines are:<br>
<tt>logfile privoxy.log</tt><br>
and the line <br>
<tt>jarfile jar.log</tt><br>
Be sure to save.
</p>

<img border="1" alt="comment out logfile"
src="http://tor.eff.org/img/screenshot-win32-privoxy-edit-2.png" />

<br>

<img border="1" alt="comment out jarfile"
src="http://tor.eff.org/img/screenshot-win32-privoxy-edit-3.png" />

<br>

<p>You'll need to exit and restart Privoxy for the changes to take effect:
</p>
<ol>
<li>Right click on the Privoxy systray icon and choose "Exit Privoxy".</li>
<li>Left click on Start Menu then Programs then Privoxy.  Select the
green "P" Privoxy icon.  Privoxy should appear in your system
tray again.</li>
</ol>

<hr />
<a name="using"></a>
<h3>Step Three: Configure your applications to use Tor</h3>

<p>After installing Tor and Privoxy, you need to configure your
applications to use them. The first step is to set up web browsing.</p>

<p>If you're using Firefox (we recommend it), check out our <a
href="tor-switchproxy.html">Tor SwitchProxy howto</a> to set up
a plugin that makes it easy to switch between using Tor and using a
direct connection.</p>

<p>Otherwise, you need to manually configure your browser to HTTP proxy
at localhost port 8118.
(That's where Privoxy listens.)
In Mozilla, this is in Edit|Preferences|Advanced|Proxies.
In Opera 7.5x it's Tools|Preferences|Network|Proxy servers.
In IE, it's Tools|Internet Options|Connections|LAN Settings|Advanced.
You should click the "use the same proxy server for all protocols"
button; but see <a
href="http://wiki.noreply.org/noreply/TheOnionRouter/TorFAQ#FtpProxy">this
note</a> about Tor and ftp proxies.
<!--You should also set your SSL proxy (IE calls it "Secure") to the same
thing, to hide your SSL traffic too.--> In IE, this looks something like:</p>

<img alt="Proxy settings in IE"
src="http://tor.eff.org/img/screenshot-win32-ie-proxies.jpg" />

<p>Using privoxy is <strong>necessary</strong> because <a
href="http://wiki.noreply.org/noreply/TheOnionRouter/TorFAQ#SOCKSAndDNS">browsers
leak your DNS requests when they use a SOCKS proxy directly</a>, which
is bad for your anonymity. Privoxy also removes certain dangerous
headers from your web requests, and blocks obnoxious ad sites like
Doubleclick.</p>

<p>To Torify other applications that support HTTP proxies, just
point them at Privoxy (that is, localhost port 8118). To use SOCKS
directly (for instant messaging, Jabber, IRC, etc), you can point
your application directly at Tor (localhost port 9050), but see <a
href="http://wiki.noreply.org/noreply/TheOnionRouter/TorFAQ#SOCKSAndDNS">this
FAQ entry</a> for why this may be dangerous. For applications
that support neither SOCKS nor HTTP, take a look at <a
href="http://www.socks.permeo.com/Download/SocksCapDownload/index.asp">SocksCap</a> or
<a href="http://www.freecap.ru/eng/">FreeCap</a>.
(FreeCap is free software; SocksCap is proprietary.)</p>

<p>For information on how to Torify other applications, check out the
<a href="http://wiki.noreply.org/wiki/TheOnionRouter/TorifyHOWTO">Torify
HOWTO</a>.
</p>

<hr />
<a name="verify"></a>
<h3>Step Four: Make sure it's working</h3>

<p>
<a href="http://ipid.shat.net">ipid.shat.net</a> and
<a href="http://www.showmyip.com/">showmyip.com</a>
are sites that show what IP address and country you appear to be coming
from.
</p>

<p>If you don't know your current public IP address, this may not be a
very useful test. To learn your IP address, go to the Start menu, click
Run and enter "<tt>cmd</tt>". At the command prompt, enter "<tt>ipconfig
/a</tt>". If you are behind a NAT or firewall, though, you won't be able
to learn your public IP address. In this case, you should 1) configure
your browser to connect directly (that is, stop using Privoxy), 2) check
your IP address with one of the sites above, 3) point your browser back
to Privoxy, and 4) see whether your IP address has changed.
</p>

<p>If you have a personal firewall that limits your computer's
ability to connect to itself, be sure to allow connections from
your local applications to local port 8118 and port 9050. If
your firewall blocks outgoing connections, punch a hole so
it can connect to at least TCP ports 80 and 443, and then see <a
href="http://wiki.noreply.org/noreply/TheOnionRouter/TorFAQ#FirewalledClient">this
FAQ entry</a>.
</p>

<p>If it's still not working, look at <a
href="http://wiki.noreply.org/noreply/TheOnionRouter/TorFAQ#ItDoesntWork">this
FAQ entry</a> for hints.</p>

<hr />

<p>If you have suggestions for improving this document, please post
them on <a href="http://bugs.noreply.org/tor">our bugtracker</a> in the
website category. Thanks!</p>

<p>$Id$</p>
</body>
</html>

